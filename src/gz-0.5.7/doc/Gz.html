<html>
<head>
<link rel="stylesheet" href="style.css" type="text/css">
<link rel="Start" href="index.html">
<link rel="next" href="Bz.html">
<link rel="Up" href="index.html">
<link title="Index of types" rel=Appendix href="index_types.html">
<link title="Index of exceptions" rel=Appendix href="index_exceptions.html">
<link title="Index of values" rel=Appendix href="index_values.html">
<link title="Index of modules" rel=Appendix href="index_modules.html">
<link title="Gz" rel="Chapter" href="Gz.html">
<link title="Bz" rel="Chapter" href="Bz.html"><link title="Datatypes & exceptions" rel="Section" href="#2_Datatypesexceptions">
<link title="Output funcions" rel="Section" href="#2_Outputfuncions">
<link title="Input functions" rel="Section" href="#2_Inputfunctions">
<link title="In-memory compression" rel="Section" href="#2_Inmemorycompression">
<title>Gz</title>
</head>
<body>
<div class="navbar">&nbsp;<a href="index.html">Up</a>
&nbsp;<a href="Bz.html">Next</a>
</div>
<center><h1>Module <a href="type_Gz.html">Gz</a></h1></center>
<br>
<pre><span class="keyword">module</span> Gz: <code class="code">sig</code> <a href="Gz.html">..</a> <code class="code">end</code></pre>Zlib interface<br>
<hr width="100%">
<br>
The module <code class="code">Gz</code> redefines most of the I/O functions of
   <code class="code">Pervasives</code> to allow I/O on compressed files (using the
   <code class="code">zlib</code> library). It doesn't use <code class="code">zlib</code> lower-level
   functions, so there might be some way to write a more efficient
   interface ; this one is however, very small (and didn't take much
   time to write!).<br>
<br>
<a name="2_Datatypesexceptions"></a>
<h2>Datatypes &amp; exceptions</h2><br>
<pre><span class="keyword">type</span> <a name="TYPEin_channel"></a><code class="type"></code>in_channel </pre>

<pre><span class="keyword">type</span> <a name="TYPEout_channel"></a><code class="type"></code>out_channel </pre>

<pre><span class="keyword">exception</span> <a name="EXCEPTIONError"></a>Error <span class="keyword">of</span> <code class="type">string</code></pre>
<div class="info">
When exception <code class="code">Error</code> is raised, the channel is automatically closed.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALversion"></a>version : <code class="type">string</code></pre><br>
<a name="2_Outputfuncions"></a>
<h2>Output funcions</h2><br>
<br><code><span class="keyword">type</span> <a name="TYPEzstrategy"></a><code class="type"></code>zstrategy = </code><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Default</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Filtered</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Huffman_only</span></code></td>

</tr></table>


<pre><span class="keyword">val</span> <a name="VALopen_out"></a>open_out : <code class="type">?compression:int -> ?strategy:<a href="Gz.html#TYPEzstrategy">zstrategy</a> -> string -> <a href="Gz.html#TYPEout_channel">out_channel</a></code></pre><div class="info">
<code class="code">open_out</code> opens the given filename for writing.<br>
</div>
<div class="param_info"><code class="code">compression</code> : specifies the level of compression : 0
   is no compression, 1 is fastest , 9 is best but slowest. The default
   is a compromise (6, I think).</div>
<div class="param_info"><code class="code">strategy</code> : refer to the <code class="code">zlib</code> manual (i.e the header 
   file <code class="code">zlib.h</code>)</div>
<pre><span class="keyword">val</span> <a name="VALsetparams"></a>setparams : <code class="type"><a href="Gz.html#TYPEout_channel">out_channel</a> -> compression:int -> strategy:<a href="Gz.html#TYPEzstrategy">zstrategy</a> -> unit</code></pre><div class="info">
<code class="code">setparams</code> modifies the two parameters of an opened channel<br>
</div>
<br>
These functions output substrings, strings, char or char value
  (<code class="code">int</code> argument). The <code class="code">external</code> ones use the <code class="code">zlib</code>
  functions, the usual Caml ones are only wrappers around
  those. <code class="code">output_string</code> and <code class="code">write</code> will correctly handle
  null characters embedded in Caml strings. <code class="code">output_value</code> uses
  <code class="code">Marshal</code> module.<br>
<pre><span class="keyword">val</span> <a name="VALwrite"></a>write : <code class="type"><a href="Gz.html#TYPEout_channel">out_channel</a> -> buf:string -> pos:int -> len:int -> unit</code></pre><pre><span class="keyword">val</span> <a name="VALoutput_string"></a>output_string : <code class="type"><a href="Gz.html#TYPEout_channel">out_channel</a> -> string -> unit</code></pre><pre><span class="keyword">val</span> <a name="VALoutput_char"></a>output_char : <code class="type"><a href="Gz.html#TYPEout_channel">out_channel</a> -> char -> unit</code></pre><pre><span class="keyword">val</span> <a name="VALoutput_byte"></a>output_byte : <code class="type"><a href="Gz.html#TYPEout_channel">out_channel</a> -> int -> unit</code></pre><pre><span class="keyword">val</span> <a name="VALoutput_newline"></a>output_newline : <code class="type"><a href="Gz.html#TYPEout_channel">out_channel</a> -> unit</code></pre><pre><span class="keyword">val</span> <a name="VALoutput_endline"></a>output_endline : <code class="type"><a href="Gz.html#TYPEout_channel">out_channel</a> -> string -> unit</code></pre><pre><span class="keyword">val</span> <a name="VALoutput_value"></a>output_value : <code class="type"><a href="Gz.html#TYPEout_channel">out_channel</a> -> 'a -> unit</code></pre><br><code><span class="keyword">type</span> <a name="TYPEflush"></a><code class="type"></code>flush = </code><table class="typetable">
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Sync_flush</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Full_flush</span></code></td>

</tr>
<tr>
<td align="left" valign="top" >
<code><span class="keyword">|</span></code></td>
<td align="left" valign="top" >
<code><span class="constructor">Finish_flush</span></code></td>

</tr></table>


<pre><span class="keyword">val</span> <a name="VALflush"></a>flush : <code class="type">?flush:<a href="Gz.html#TYPEflush">flush</a> -> <a href="Gz.html#TYPEout_channel">out_channel</a> -> unit</code></pre><div class="info">
The <code class="code">flush</code> function should be used with caution because it can
   degrade compression.<br>
</div>
<div class="param_info"><code class="code">flush</code> : defaults to <code class="code">Sync_flush</code>.</div>
<pre><span class="keyword">val</span> <a name="VALseek_out"></a>seek_out : <code class="type"><a href="Gz.html#TYPEout_channel">out_channel</a> -> offset:int -> unit</code></pre><div class="info">
<code class="code">seek_out</code> set the position of the next write operation on the
   channel. Only forward seeks are supported; <code class="code">seek_out</code> then
   compresses a sequence of zeroes up to the new starting position. It<br>
<b>Raises</b> <code>Invalid_argument</code> if called with a negative offset.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALpos_out"></a>pos_out : <code class="type"><a href="Gz.html#TYPEout_channel">out_channel</a> -> int</code></pre><pre><span class="keyword">val</span> <a name="VALclose_out"></a>close_out : <code class="type"><a href="Gz.html#TYPEout_channel">out_channel</a> -> unit</code></pre><div class="info">
<code class="code">close_out</code> flushes all pending output if necessary, closes the
   compressed file and deallocates all the (de)compression state. Any
   subsequent use of the channel will raise an <code class="code">Error</code> exception.<br>
</div>
<br>
<a name="2_Inputfunctions"></a>
<h2>Input functions</h2><br>
<pre><span class="keyword">val</span> <a name="VALopen_in"></a>open_in : <code class="type">string -> <a href="Gz.html#TYPEin_channel">in_channel</a></code></pre><br>
<code class="code">read</code> reads characters from the stream and returns the number
   of bytes actually read ; it does not raise <code class="code">End_of_file</code>. 
   <code class="code">input_char</code> and <code class="code">input_line</code> should
   appropriately raise <code class="code">End_of_file</code> if necessary.
   <code class="code">input_value</code> uses <code class="code">Marshal</code> module.<br>
<pre><span class="keyword">val</span> <a name="VALread"></a>read : <code class="type"><a href="Gz.html#TYPEin_channel">in_channel</a> -> buf:string -> pos:int -> len:int -> int</code></pre><pre><span class="keyword">val</span> <a name="VALinput_char"></a>input_char : <code class="type"><a href="Gz.html#TYPEin_channel">in_channel</a> -> char</code></pre><pre><span class="keyword">val</span> <a name="VALinput_line"></a>input_line : <code class="type"><a href="Gz.html#TYPEin_channel">in_channel</a> -> string</code></pre><pre><span class="keyword">val</span> <a name="VALinput_value"></a>input_value : <code class="type"><a href="Gz.html#TYPEin_channel">in_channel</a> -> 'a</code></pre><pre><span class="keyword">val</span> <a name="VALrewind"></a>rewind : <code class="type"><a href="Gz.html#TYPEin_channel">in_channel</a> -> unit</code></pre><pre><span class="keyword">val</span> <a name="VALseek_in"></a>seek_in : <code class="type"><a href="Gz.html#TYPEin_channel">in_channel</a> -> offset:int -> unit</code></pre><div class="info">
The <code class="code">seek_in</code> function is emulated but can be extremely slow.<br>
</div>
<pre><span class="keyword">val</span> <a name="VALpos_in"></a>pos_in : <code class="type"><a href="Gz.html#TYPEin_channel">in_channel</a> -> int</code></pre><pre><span class="keyword">val</span> <a name="VALclose_in"></a>close_in : <code class="type"><a href="Gz.html#TYPEin_channel">in_channel</a> -> unit</code></pre><br>
<a name="2_Inmemorycompression"></a>
<h2>In-memory compression</h2><br>
<br>
These functions compress and uncompress from a string to another 
   string.<br>
<pre><span class="keyword">val</span> <a name="VALcompress"></a>compress : <code class="type">?compression:int -> string -> pos:int -> len:int -> string</code></pre><pre><span class="keyword">val</span> <a name="VALuncompress"></a>uncompress : <code class="type">string -> pos:int -> len:int -> string</code></pre></body></html>